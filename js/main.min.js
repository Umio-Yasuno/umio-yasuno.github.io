function toast_msg(){const e=document.getElementById(`msg`);if(e.hasChildNodes())return;e.hidden=!1;const t=document.createElement(`div`);t.className=`toast-msg`,t.onanimationend=()=>{e.style.opacity=0},e.ontransitionend=()=>{e.hidden=!0,e.style.opacity=1,e.innerHTML=''},e.appendChild(t)}async function copy_url(t={url:!0,title:!1}){const n=document.title,e=location.href;if(navigator.canShare&&!t.title){await navigator.share({url:e});return}const s=(()=>t.title?`${n}\n${e}`:e)();await navigator.clipboard.writeText(s).then(toast_msg())}async function copy_code(t){const n=t.nextElementSibling.textContent,e=t.nextElementSibling.nextElementSibling.children[0].children[0],s=(()=>e.text&&e.href?n+` \n\n`+e.text+` \n`+e.href:n+` \n\n`+location.href)();if(!s)return;await navigator.clipboard.writeText(s).then(toast_msg())}function err_tag_comple(t){const e=document.getElementById(`err-tag-comple`),n=(()=>25<=t.length?`${t.substring(0,22)}...`:t)();if(e.dataset.err=`\"${n}\" is not found`,!e.hidden)return;e.hidden=!1,setTimeout(()=>{e.hidden=!0},2e3)}function jump_tag(t){if(t.key!=`Enter`&&t.type!=`click`)return;const n=document.getElementById(`input-tag-comple`).value,e=n.trim().replace(/\s+/g,`_`).replace(/_+/g,`_`).toLowerCase();if(!e)return;const s=document.getElementById(`tags-list`).querySelector(`[value="${e}"]`);if(!s){err_tag_comple(n);return}location.href=`/tags/${e}/`}function clear_value(){document.getElementById(`input-tag-comple`).value=``}async function gh_search(i){if(i.key!=`Enter`&&i.type!=`click`)return;const r=document.querySelector(`#error_msg`),s=t=>{let e=r.content.cloneNode(!0);return e.querySelector(`.msg_txt`).textContent=t,e},o=document.getElementById(`gh-search-val`),t=document.querySelector(`#gh-search`);if(!o.validity.valid){disp_result(t,s(o.validationMessage),0);return}const u=(()=>{const e=o.value.trim().replace(/\s+/g,` `);return encodeURI(e)})();disp_result(t,"...",0);const c=`repo:umio-yasuno/coelacanth-dream`,l=`https://api.github.com/search/code?q=${u}+${c}`,[e,n]=await Promise.all([fetch(encodeURI(l),{mode:`cors`,credentials:`omit`,keepalive:!0}).then(e=>e.json()).then(e=>e).catch(e=>{disp_result(t,s(`Failed. [${e}]`))}),fetch(`/index.json`).then(e=>e.json()).then(e=>e)]);if(e.total_count===0){disp_result(t,s(`No result.`),0);return}const d=document.querySelector(`#gh-debug`);let a=document.createDocumentFragment();for(let s=0;s<e.total_count;s++){if(!e.items[s])continue;const t=e.items[s].path.trim().replace(/^.?content\/?/,`/`).replace(/\.md$/,`/`);if(!n[t])continue;let i=d.content.cloneNode(!0),o=i.querySelector(`article.entry`),r=o.querySelector(`.entry-title-link`);r.href=t,r.textContent=n[t].title,o.querySelector(`.entry-time-update`).textContent+=` ${n[t].pub}`,o.querySelector(`.entry-time-post`).textContent+=` ${n[t].lastmod}`,a.append(i)}disp_result(t,a,e.total_count)}function disp_result(t,n,e=0){t.dataset.count=(()=>0<e?e:0)(),document.getElementById(`result-list`).replaceChildren(n)}async function random_page(){const e=await fetch(`/index.json`).then(e=>e.json()).then(e=>e),t=(()=>{const t=Object.keys(e);return t[Math.floor(t.length*Math.random())]})();location.href=`${t}`}