function toast_msg(){const msg=document.getElementById(`msg`);msg.classList.add(`toast-msg`);setTimeout(()=>{msg.classList.remove(`toast-msg`);},1500);}
function copy_url(type){const title=document.title;const url=location.href;if(type===`url`&&navigator.share){navigator.share({title:title,url:url});return;}
const txt=(()=>{if(type===`title_url`){return `${title}\n\n${url}`;}else{return url;}})();navigator.clipboard.writeText(txt).then(toast_msg());}
function err_tag_comple(tag_val){const err_msg=document.getElementById(`tag-comple-error`);const wrong_tag=(()=>{if(25<=tag_val.length)
return `${tag_val.substring(0,22)}...`;else
return tag_val;})();err_msg.innerHTML=`"${wrong_tag}" not found`;err_msg.classList.add(`toast-err`);setTimeout(()=>{err_msg.classList.remove(`toast-err`);},2000);}
function jump_tag(e){if(e.key!=`Enter`&&e.type!=`click`)
return;const tag_val=document.getElementById(`input-tag-comple`).value.trim().replace(/\s+/,` `);if(tag_val==``)
return;const selector=document.getElementById(`tags-list`).querySelector(`[value="${tag_val}"]`);if(!selector){err_tag_comple(tag_val);return;}
location.href=`/tags/${selector.dataset.url}/`;}
function clear_value(){return document.getElementById(`input-tag-comple`).value=``;}
function copy_code(t){const code=t.previousElementSibling.textContent;const link=t.nextElementSibling.children[0].children[0];const txt=(()=>{if(link.text&&link.href){return code+` \n\n`+link.text+` \n`+link.href;}else{return code+` \n`+location.href;}})();if(!txt)return;navigator.clipboard.writeText(txt).then(toast_msg());}
const PreEle=document.getElementsByTagName(`PRE`);for(let i=0;i<PreEle.length;i++){PreEle[i].addEventListener(`mouseover`,()=>{if(PreEle[i].nextSibling.className==`copy-code sb`)return;const btn=document.createElement(`BUTTON`);btn.classList.add(`copy-code`,`sb`);btn.setAttribute(`onclick`,`copy_code(this)`);PreEle[i].parentNode.insertBefore(btn,PreEle[i].nextSibling);});}