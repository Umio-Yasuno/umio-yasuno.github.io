<!DOCTYPE html>
<html>
	<head>
	    	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<meta http-equiv="Cache-Control" content="max-age=2592000">
<title>Raven Matome | Coelacanth&#39;s Dream</title>
	<meta name="description" content="個人的にまとめたハードウェア系の情報や推測を公開するブログ的なもの" />
	<base href="https://umio-yasuno.github.io/posts/2019/11/06/raven-matome/"><meta name="url" content="https://umio-yasuno.github.io/posts/2019/11/06/raven-matome/" />
	<meta name="author" content="Umio Yasuno" />
	<meta name="keywords" content=" Radeon, Raven, APU" />
	<meta name="referrer" content="no-referrer" />
	<meta name="format-detection" content="telephone=no, address=no, email=no">

	<meta property="og:locale" content="ja">
<style>
html {
	background-size: 100vw;
	background-attachment: fixed;
	background-image: radial-gradient(darkslategray 90%, black 100%);
	z-index: -100;
}
.text {
	color: snow;
	box-sizing: border-box;
	padding: 0 2vw 0 2vw;
	z-index: 100;
	font-size: 1em;
	line-height: 1.7em;
	word-wrap: break-word;
	text-justify: inter-character;
::-webkit-scrollbar {
		width: 6px;
		background-color: rgba(255,0,0, 0.0);
		}
scrollbar-width: thin;
scrollbar-color: rgba(0,128,128, 0.3) rgba(255,0,0, 0.0);
}
li {
	list-style: square none outside;
	color: mediumaquamarine;
}
h2, h3, h4, h5 {
	color: #FF9900;
	font-weight: normal;
	font-family: sans-serif;
}
h2 { font-size: 1.4em}
h3 { font-size: 1.2em;	margin: 2em 0 0 0.6em}
h4 { font-size: 1em;	margin: 2em 0 -0.6em 1.2em}
h5 { font-size: .96em;	margin: -3em 0 -1em 2.5em}
h2 ~ p { margin-left: 2%}
h5 + p { margin-left: 8%}
table {
	border-collapse: collapse;
	border-spacing: 0;
	table-layout: fixed;
	overflow-x: scroll;
	display: inline-block;
	margin: 2em 0 0 1em;
	max-width: 90%;
	color: lime;
	font-size: 0.94em;
	line-height: 1.2em;
	font-family: monospace;
}
th { font-style: italic;}
th, tr, td {
	border: 1px solid forestgreen;
	padding: 0.5em 0.6em 0.4em 0.8em;
	font-weight: normal;
}
thead:nth-last-child(2) {
	color: darkorange;
	font-size: 1.05em;
}
td:first-child { color: turquoise}
tr:nth-child(2n) { background-color: rgba(119, 136, 153, 0.3)}
blockquote {
	color: lime;
	margin-left: 2em;
	border-left: 0.1em solid limegreen;
	padding-left: 0.9em;
}
.post { max-width: 95%}
.title {	
	font: normal 1.5em monospace;
	margin: 0 .5em 1em 1em;
	text-align: right;
	text-decoration: none;
	display: block;
}
.title > a { color:black}
.page-title,
.page-title a {
		color: #FF9900;
		font-size: 1em;
		margin: 0;
}
.lastmod, .date {
	color: lime;
	font-size: 0.8em;
	font-weight: normal;
	font-style: italic;
}
a {
	color: #66ccff;
	text-decoration: none;
	margin: 0 0.5em 0 0.5em;
}</style>

	<link rel="preload" href="https://umio-yasuno.github.io/css/lain.min.css" as="style" importance="high">
	<link rel="preload" href="https://umio-yasuno.github.io/css/animation.min.css" as="style" importance="high">
		<link rel="stylesheet" href="https://umio-yasuno.github.io/css/lain.min.css">
		<link rel="stylesheet" href="https://umio-yasuno.github.io/css/animation.min.css">
		<link rel="icon" href="https://umio-yasuno.github.io/favicon.ico">
	</head>
    <body>
	<main>
		<article class="text">
			<br>
			<header>	<span class="title">
		<a href="https://umio-yasuno.github.io/">Coelacanth&#39;s Dream</a>
	</span>
</header>
			<br>
		<h2><span class="page-title">Raven Matome </span></h2>
			

<p>ZenとVegaによる優秀な性能とコスパで広くに人気なAPU、Ravenについてのまとめ。</p>

<h3 id="スペック">スペック</h3>

<p>まず一番最初に出たRavenのスペックをざっとまとめたのが以下。</p>

<table>
<thead>
<tr>
<th align="left"></th>
<th align="center">Raven</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">CMOS</td>
<td align="center">14nm</td>
</tr>

<tr>
<td align="left">CPU</td>
<td align="center">Zen(+)</td>
</tr>

<tr>
<td align="left">Max CPU Core/Thread</td>
<td align="center">4/8</td>
</tr>

<tr>
<td align="left">L3$ CPU</td>
<td align="center">4MB</td>
</tr>

<tr>
<td align="left">GPU</td>
<td align="center">Vega(GFX9)</td>
</tr>

<tr>
<td align="left">GPU Clock</td>
<td align="center">1250MHz</td>
</tr>

<tr>
<td align="left">ShaderEngine</td>
<td align="center">1</td>
</tr>

<tr>
<td align="left">Max CUs</td>
<td align="center">11</td>
</tr>

<tr>
<td align="left">Max TMUs</td>
<td align="center">44</td>
</tr>

<tr>
<td align="left">Max ROPs</td>
<td align="center">8</td>
</tr>

<tr>
<td align="left">L2$ GPU</td>
<td align="center">1MB</td>
</tr>

<tr>
<td align="left">Memory Type</td>
<td align="center">DDR4</td>
</tr>

<tr>
<td align="left">Support Memory Speed</td>
<td align="center">2933MHz</td>
</tr>

<tr>
<td align="left">VCN ver</td>
<td align="center">1.0</td>
</tr>

<tr>
<td align="left">DCN ver</td>
<td align="center">1.0/1.01</td>
</tr>

<tr>
<td align="left">DeviceID</td>
<td align="center">15DD</td>
</tr>

<tr>
<td align="left">GPU ID</td>
<td align="center">gfx902</td>
</tr>

<tr>
<td align="left">DieSize</td>
<td align="center">209.78mm2</td>
</tr>
</tbody>
</table>

<p>使われた製品名は</p>

<ul>
<li>Ryzen 5 2400G/2200G</li>
<li>Athlon 200GE/220GE/240GE</li>
<li>Ryzen 3 2200U/2300U</li>
<li>Ryzen 5 2500U/2600H</li>
<li>Ryzen 7 2700U/2800H</li>
<li>Ryzen Embedded V1202B/V1605B/V1756B/V1807B</li>
</ul>

<p>14nmなのにZen(+)という書き方をしたのは、RavenにはZen+からの機能や改良点が盛り込まれており、<br />
キャッシュレイテンシ削減によるIPC向上も確認されているからだ。<br />
<a href="https://www.guru3d.com/articles_pages/amd_ryzen_5_2400g_review,8.html" rel="nofollow noreferrer" target="_blank">AMD Ryzen 5 2400G review - Performance - CineBench (and IPC)-Guru3D</a><br />
CU数はそれまでのAPUよりも多くなり、クロックも向上、CPU性能もZenになったことでかなり引き上げられ、丁度いいバランスとなっている。<br />
マルチメディアではVCN1.0にてRadeon初のVP9 HWデコードに対応した。<br />
DCN1.0と1.01の違いだが、正直わからない。<br />
ほんと初期のRavenは1.0だったらしいのだが、恐らく製品段階では1.01になったと思われる。</p>

<p>性能以外のことでは、Zenではダイとヒートスプレッダ間の接合にハンダが使われ好評だったのに対し、コスト削減のためかRavenではグリスが使われた。<br />
そのため、小型PCに詰め込む人やOCは殻割りをおこなったが、ヒートスプレッダの接着部分すぐ近くにチップコンデンサが配置されていたり、PGAなためピンを曲げないようにしなければいけないとかで難易度は高かったようだ。</p>

<p>個人的な話だと、ある時AmazonにてPro 2400Gのバルクが現れ、その情報が広まると家庭内サーバ目的でECCメモリが使いたい人や趣味に走る人が購入していき、<br />
すぐに売り切れたことが記憶に残っている。</p>

<h3 id="raven2-picasso">Raven2/Picasso</h3>

<table>
<thead>
<tr>
<th align="left"></th>
<th align="center">&mdash;Raven2&mdash;</th>
<th align="center">&mdash;Picasso&mdash;</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">CMOS</td>
<td align="center">14nm</td>
<td align="center">12nm</td>
</tr>

<tr>
<td align="left">CPU</td>
<td align="center">Zen(+)</td>
<td align="center">Zen+</td>
</tr>

<tr>
<td align="left">Max CPU Core/Thread</td>
<td align="center">2/4</td>
<td align="center">4/8</td>
</tr>

<tr>
<td align="left">L3$ CPU</td>
<td align="center">4MB</td>
<td align="center">4MB</td>
</tr>

<tr>
<td align="left">GPU</td>
<td align="center">Vega(GFX9)</td>
<td align="center">Vega(GFX9)</td>
</tr>

<tr>
<td align="left">GPU Clock</td>
<td align="center">1200MHz</td>
<td align="center">1400MHz</td>
</tr>

<tr>
<td align="left">ShaderEngine</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>

<tr>
<td align="left">Max CUs</td>
<td align="center">3</td>
<td align="center">11</td>
</tr>

<tr>
<td align="left">Max ROPs</td>
<td align="center">4</td>
<td align="center">8</td>
</tr>

<tr>
<td align="left">Max TMU</td>
<td align="center">12</td>
<td align="center">44</td>
</tr>

<tr>
<td align="left">L2$ GPU</td>
<td align="center">0.5MB</td>
<td align="center">1MB</td>
</tr>

<tr>
<td align="left">Memory Type</td>
<td align="center">DDR4</td>
<td align="center">DDR4</td>
</tr>

<tr>
<td align="left">Support Memory Speed</td>
<td align="center">2400MHz</td>
<td align="center">2933MHz</td>
</tr>

<tr>
<td align="left">VCN ver</td>
<td align="center">1.0</td>
<td align="center">1.0</td>
</tr>

<tr>
<td align="left">DCN ver</td>
<td align="center">1.01</td>
<td align="center">1.01</td>
</tr>

<tr>
<td align="left">DeviceID</td>
<td align="center">15DD/15D8</td>
<td align="center">15D8</td>
</tr>

<tr>
<td align="left">GPU ID</td>
<td align="center">gfx909</td>
<td align="center">gfx902</td>
</tr>

<tr>
<td align="left">DieSize</td>
<td align="center">154.68mm2?</td>
<td align="center">209.78mm2</td>
</tr>
</tbody>
</table>

<p>(2019-11-07追記//)よくよく考えたらRaven2が15DDだというソースを見たことがなく、探しても完全にそうと言えるものはなかった。<br />
Picassoに関しては15D8で確定している。<br />
<a href="https://cgit.freedesktop.org/~agd5f/linux/commit/drivers/gpu/drm/amd?h=amd-staging-drm-next&amp;id=e7ad88553aa1d48e950ca9a4934d246c1bee4be4" rel="nofollow noreferrer" target="_blank">drm/amdkfd: Add picasso pci id</a><br />
どうもRaven2はRevisionIDで区別してるらしい。<br />
こういった記述があれば、<br />
<a href="https://github.com/GPUOpen-Drivers/pal/blob/dev/src/core/os/nullDevice/ndDevice.cpp#L85" rel="nofollow noreferrer" target="_blank">https://github.com/GPUOpen-Drivers/pal/blob/dev/src/core/os/nullDevice/ndDevice.cpp#L85</a><br />
こういったコメントもある、<br />
<a href="https://lists.freedesktop.org/archives/dri-devel/2019-October/240407.html" rel="nofollow noreferrer" target="_blank">[RFC] drm: Add AMD GFX9+ format modifiers.</a></p>

<blockquote>
<p>We use family_id + external_rev to distinguish between incompatible GPUs.  PCI ID is not enough, as RAVEN and RAVEN2 have the same PCI device id,</p>
</blockquote>

<p>そのためRaven2のDeviceIDには15DD/15D8の2つがある、ということにしておく。<br />
(//追記終了)</p>

<p>使われた製品は、</p>

<ul>
<li>Raven2

<ul>
<li>Ryzen 5 3200U</li>
<li>Athlon 300U</li>
<li>Ryzen Embedded R1505G</li>
<li>Ryzen Embedded R1606G</li>
</ul></li>
<li>Picasso

<ul>
<li>Ryzen 5 3400G/3200G</li>
<li>Ryzen 3 3300U</li>
<li>Ryzen 5 3500U/3550H/3580U</li>
<li>Ryzen 7 3700U/3750H/3780U</li>
</ul></li>
</ul>

<p>この2つを簡潔に説明すると、<br />
Raven2は14nmのままRavenをより小型に設計、<br />
PicassoはRavenをまんま12nmにした、<br />
という感じだ。</p>

<p>それとRaven2のダイサイズは画像を元に求めたものなので、あまり当てにならない。</p>

<p>この2つは同時期(2018-09頃)にパッチが投稿され、私としてはどう違うのかよくわからず少し混乱したのを覚えている。</p>

<h3 id="renoir-dali">Renoir/Dali</h3>

<p>この2つはまだ製品が出ておらず、Renoirはパッチが色々投稿され、あれこれ噂が出てきているが、Daliの方は名前が出て以降さっぱり。<br />
とりあえずわかっていることは、</p>

<ul>
<li>Renoir

<ul>
<li>LP/DDR4/Xをサポート(Max Memory Speed 4266MHz)</li>
<li>VCN2.0(Navi1xと同一) <a href="https://cgit.freedesktop.org/~agd5f/linux/commit/drivers/gpu/drm/amd?h=amd-staging-drm-next&amp;id=279ba48e1f7677008e6e04d3eeb37b81b7496ed0" rel="nofollow noreferrer" target="_blank">drm/amdgpu: add VCN2.0 to Renoir IP blocks</a></li>
<li>DCN2.1でDSC搭載</li>
<li>DeviceID: 1636 <a href="https://cgit.freedesktop.org/~agd5f/linux/commit/drivers/gpu/drm/amd?h=amd-staging-drm-next&amp;id=61bdb39c913fcd998faef7664a5f2f0170000335" rel="nofollow noreferrer" target="_blank">drm/amdgpu: add renoir pci id</a></li>
<li>GPU ID: gfx909</li>
</ul></li>
<li>Dali

<ul>
<li>DCN1.01(Raven/2、Picassoと同一)</li>
<li>Raven2ベース <a href="https://cgit.freedesktop.org/~agd5f/linux/commit/drivers/gpu/drm/amd?h=amd-staging-drm-next&amp;id=c4cacce7850042ad6b65d518d47497c0ae70c8b6" rel="nofollow noreferrer" target="_blank">drm/amd/display: add Asic ID for Dali</a></li>
</ul></li>
</ul>

<p>くらいだ。</p>

<p>DaliがRaven2ベースと言うが、RenoirもGPU IDはraven2と同一であり、どう差別化するのかうまく想像できない。 <a href="https://gitlab.freedesktop.org/mesa/mesa/blob/master/src/amd/llvm/ac_llvm_util.c#L145" rel="nofollow noreferrer" target="_blank">ac_llvm_util.c</a><br />
RenoirはCPUがZen2であると噂されており、それならわかりやすいが、Daliの方はどうするのだろうか。<br />
海外メディアの推測では、より低消費電力用途向けではないかということだったが、Raven2からさらに削るつもりかプロセスを14/12nmより進んだものにするのか。</p>

<p>(2019-11-07追記//)  Athlon 3000Gの名前を聞いて思いついたのだが、DaliはRaven2をまんま12nmにしたものかもしれない。<a href="https://northwood.blog.fc2.com/blog-entry-10024.html" rel="nofollow noreferrer" target="_blank">Athlon 3000G? - 北森瓦版</a><br />
それなら特にパッチが投稿されないのも噂されないのも納得が行くような気がする。<br />
<a href="https://cgit.freedesktop.org/~agd5f/linux/commit/drivers/gpu/drm/amd?h=amd-staging-drm-next&amp;id=c4cacce7850042ad6b65d518d47497c0ae70c8b6" rel="nofollow noreferrer" target="_blank">drm/amd/display: add Asic ID for Dali</a><br />
これを見るにDaliはPicassoの新リビジョン(E3、E4)のように読める。<br />
まだ確定した訳ではないが、最初からちゃんと読んでおくべきだった。<br />
それと今回は追記日時を書いたが、このサイトはGithub Pageを利用しているため、<br />
ここを見れば更新日時と内容がわかるようになっている。<br />
<a href="https://github.com/Umio-Yasuno/umio-yasuno.github.io" rel="nofollow noreferrer" target="_blank">https://github.com/Umio-Yasuno/umio-yasuno.github.io</a><br />
(//追記終了)</p>

<hr>
<div class="footer">
<a href="https://umio-yasuno.github.io/tags">Tags</a>:<a href="https://umio-yasuno.github.io/tags/radeon"> Radeon,</a><a href="https://umio-yasuno.github.io/tags/gcn"> GCN,</a><a href="https://umio-yasuno.github.io/tags/raven"> Raven,</a><a href="https://umio-yasuno.github.io/tags/gfx9"> GFX9,</a><a href="https://umio-yasuno.github.io/tags/gfx902"> gfx902,</a><a href="https://umio-yasuno.github.io/tags/gfx909"> gfx909,</a><br>
			<a href="https://umio-yasuno.github.io/categories">Categories</a>:<a href="https://umio-yasuno.github.io/categories/hardware"> Hardware,</a><a href="https://umio-yasuno.github.io/categories/amd"> AMD,</a><a href="https://umio-yasuno.github.io/categories/apu"> APU,</a><a href="https://umio-yasuno.github.io/categories/gpu"> GPU,</a><br> <span>&nbsp;&nbsp;Author : Umio Yasuno</span>
		&nbsp;/&nbsp;<span data-lastmod="Nov 14 2019, 17:23">Lastmod : Nov 14, 17:23</span>
		<br>
		<address class="mail"><a href="https://umio-yasuno.github.io/about/">About</a> </address>
		<br><br>	<span class="title">
		<a href="https://umio-yasuno.github.io/">Coelacanth&#39;s Dream</a>
	</span>
</div>

		</article>
	</main>
					<div class="lace"></div> 
    </body>
</html>
