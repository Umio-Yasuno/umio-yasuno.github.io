<!DOCTYPE html>
<html>
	<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<meta http-equiv="Cache-Control" content="max-age=259200, immutable">
<title>Navi12 Matome Part2 | Coelacanth&#39;s Dream</title>
	<meta name="description" content="個人的にまとめたハードウェア系の情報や推測を公開するブログ的なもの" />
	<base href="https://umio-yasuno.github.io/posts/2019/12/23/navi12-matome-p2/"><meta name="url" content="https://umio-yasuno.github.io/posts/2019/12/23/navi12-matome-p2/" />
	<meta name="author" content="Umio Yasuno" />
	<meta name="keywords" content="Radeon, Navi12" />
	<meta name="referrer" content="no-referrer" />
	<meta name="format-detection" content="telephone=no, address=no, email=no">
	<meta property="og:locale" content="ja">

		<link rel="preload" href="https://umio-yasuno.github.io/css/footer.min.css" as="style">
		<link rel="preload" href="https://umio-yasuno.github.io/css/page.min.css" as="style">
		<link rel="preload" href="https://umio-yasuno.github.io/css/anim.min.css" as="style"><style>
html {
	background-size: 100%; background-attachment: fixed; background-image: radial-gradient(darkslategray 84%, #00080B 101%);
	z-index: -100
}
.title {	
	font: normal 1.7em monospace;	text-decoration: none;	text-align: end;
	display: block;	margin: .5em 7vw .5em 0;
	}
.title > a {
	color: #6D9CA9;
	text-shadow: 0 2px .8em #538290
}
.page-title, .page-title a {
	color: #FF9900; font-size: 1em;
	margin: 0
}
a {
	color: #66ccff; text-decoration: none;
	margin: 0 .5em 0 .5em
}
.text {
	color: snow;
	box-sizing: border-box;
	padding: 0 2vw 0 2vw;
	z-index: 100;
	line-height: 1.6em;
	word-wrap: break-word;
	text-justify: inter-character;
scrollbar-width: thin; scrollbar-color: rgba(0,128,128, .5) rgba(255,0,0, 0)
}
.text::-webkit-scrollbar {width: 4px; background-color: rgba(255,0,0, 0)}
footer {display: none}h1, h2, h3, h4 {color: #FF9900;font: normal 1em sans-serif}
h1 {font-size: 1.4rem; padding: 0 0 .5rem 0}
h2 {font-size: 1.3rem; padding: 2rem 0 0 0}
h3 {font-size: 1.2rem; padding: 2rem 0 0 .6rem}
h4 {font-size: 1.1rem; padding: 2rem 0 0 1rem}
h1 ~ p {padding-left: 2vw}</style>

			<link rel="stylesheet" href="https://umio-yasuno.github.io/css/page.min.css">
			
			<link rel="preload" href="https://umio-yasuno.github.io/css/ins.min.css" as="style">
		<link rel="icon" href="https://umio-yasuno.github.io/favicon.ico">
	</head>
    <body>
	<main>
		<header>
		<br><div class="title"><a href="https://umio-yasuno.github.io/">Coelacanth&#39;s Dream</a></div>
<br>
		</header>
			<article class="text">
		<h1><span class="page-title">Navi12 Matome Part2 </span></h1>
			

<p>そろそろ出てきてよさそうなNavi12だが、ここに来て情報が錯綜してきた。<br />
Navi21が近いと囁かれていることからキャンセルされるんじゃないかとか、RX 5600シリーズに使われるのがNavi12じゃないかとか。<br />
他にも矛盾する噂が存在してたりと、噂が飛び交うのが常である半導体業界だがNavi12に限っては特にそうだ。</p>

<p>そして次に聞こえてくるのはハテナマークだけが浮かぶ与太話か、矛盾そのままを抱えたカオスか、悲観的な妄想。<br />
自分がそれを発信しない人間だとは言い切れないが、そうでないようには努めたい。<br />
そのため、Linux KernelやMesa3Dといったオープンソースからだけの情報を載せていく。</p>

<p><code>過去まとめ: <a href="https://umio-yasuno.github.io/posts/2019/11/05/navi12-matome/">Navi12 Matome</a>  </code></p>

<h3 id="navi12のgameclockは1100mhz">Navi12のGameClockは1100MHz?</h3>

<p>Linux Kernelへのパッチから。<br />
<a href="https://patchwork.freedesktop.org/patch/346277/" rel="nofollow noreferrer" target="_blank">[2/2] drm/amdgpu/smu: add peak profile support for navi12 - Patchwork AMD X.Org drivers</a></p>

<p>あくまでボード側のVBIOSにPPTableのプロファイルが無かった場合に読み込むものだが、<br />
これまでのNavi10/14の例で言えば、1100MHzがNavi12のGameClockとなる。</p>

<h4 id="ここから推測">ここから推測</h4>

<p>が、疑問点が2つあり、1つはGameClockが低すぎるというもの。<br />
Navi1x系列では最も低く、Navi14 XLM（RX 5300M）よりも低い。<br />
もう１つは</p>

<blockquote>
<p>NAVI12_UMD_PSTATE_PEAK_GFXCLK     (1100)</p>
</blockquote>

<p>とだけで、XTXやXLといったSKUを示すような記述がないことだ。<br />
Navi12のSKUが1種類だけ（= リビジョンが1つだけ）ならば成り立つが、やはり不自然、と言うかイレギュラーだと思わされる。</p>

<p>半導体には歩留まりがあり、ダイのスペック通りのものだけが出る訳がないため、１種類のダイで1種類のSKUなんてのは通常滅多にやらない。やるとしてもほとんどはゲーム機のためであり、そこでは冗長部分を加えたり仕様クロックを低めにすることで多くのダイが基準をクリアできるようにする。</p>

<p>だがNavi12関連のコードがLinux Kernel、Mesa3Dに追加されていることから、ゲーム機なんてことはなくコンシューマー市場に出てくると見ている。<br />
VF(Virtual Function)用のDeviceIDもあることから、サーバー向けGPUとしても出てくるはずだ。</p>

<p>そのため1100MHzというのは仮のクロックな可能性もある。</p>

<p><strong><em>もしも、</em></strong> GameClock:1100MHzが正しいとすると、あり得るのはそれだけクロックを下げないといけないくらいWGPが多い（= ダイサイズが大きい）か、MCM（Multi-Chip Module）構成かだ。</p>

<p>だがWGP数は、――AMDはBoostClockでピーク性能を出すのに加え、他の要素も多くあることから単純に測ることはできないが――GameClockがNavi10 XT（RX 5700 XT）の約0.63倍なため、約1.6〜1.7倍のWGPがないとNavi10を性能で超せないことになる。<br />
超す必要なんてなく、モバイル向けという可能性だってあるが、VF用DeviceIDがあることと、大きく矛盾はしないが説として衝突する。</p>

<p>MCM説は、正直願望によるものが大きい。<br />
Vega20で外部へのInfinity Fabric（以下IF）が実装され、4 GPUでのコヒーレントに対応し、Apple専用となったVega II Duoでは1つのボードにVega20を2個実装し、お互いがIFで接続されている。<br />
同時期に登場したRyzen 3000シリーズでは、CPU部とI/O部でダイが分けられMCM構成を取り、これもお互いにIFで接続されている。<br />
こうしたことでNaviでのMCM、mGPUの期待は前々からあった。</p>

<p>VF用としてはVega10を2個、1つのボードに実装したV340があり、Navi12でMCMが可能とされていてもおかしくはない。<br />
<a href="https://patchwork.freedesktop.org/patch/346176/" rel="nofollow noreferrer" target="_blank">[3/5] drm/amdgpu: GPU TLB flush API moved to amdgpu_amdkfd</a><br />
ただ、<strong><em>現時点の</em></strong>情報だとその可能性は断たれている。<br />
<a href="https://cgit.freedesktop.org/~agd5f/linux/commit/drivers/gpu/drm/amd/powerplay/inc/smu11_driver_if_navi10.h?h=amd-staging-drm-next&amp;id=013fd3a61a827c65491b0bb9ad3c0417f09c8146" rel="nofollow noreferrer" target="_blank">drm/amd/powerplay: don&rsquo;t include the smu11 driver if header in smu v11 (v2) - Linux Kernel/amd-staging-drm-next</a></p>

<blockquote>
<p>v2: add hack for XGMI (Alex)</p>
</blockquote>

<p>とあり、ここでの hack は切り刻むとか切り捨てるとかの意だと思われる。<br />
コードを見ても、Vega20やArcturusではあるXGMIの記述が、 smu11_driver_if_navi10.h だと消されている。</p>

<h3 id="要するに">要するに</h3>

<p>まったくわからない。<br />
何かを肯定する材料があれば、それを否定する材料もある。<br />
結局は自分も矛盾を抱えたカオスしか話せない。</p>

<p>こんな時はあまり考えず、別のことをしてただ待つのが一番だ。せっかくの年末、じっくり本を読んだり、映画やアニメを観たり、ゲームに熱中したり、冬の写真を撮りに行ったり、UEFIの設定を詰めたり、Firefoxのカスタムビルドに挑戦してもいいし、Mesaのビルドに慣れて最新Radeonが販売開始された時に備えるのもいい。<br />
わからないものに思考が支配されると変な方向に突っ走ってしまいがちだ。<br />
何をしていてもそのうち、また新たなパッチでNavi12の姿が少しずつ明らかになっていく。</p>

<link rel="stylesheet" href="https://umio-yasuno.github.io/css/footer.min.css">
		</article>
<hr>
<footer>
		<nav class="foot-tags">
			<a href="https://umio-yasuno.github.io/tags">Tags</a>&nbsp;:
			&nbsp;<a href="https://umio-yasuno.github.io/tags/radeon">Radeon</a>,
			&nbsp;<a href="https://umio-yasuno.github.io/tags/rdna">RDNA</a>,
			&nbsp;<a href="https://umio-yasuno.github.io/tags/navi">Navi</a>,
			&nbsp;<a href="https://umio-yasuno.github.io/tags/navi12">Navi12</a>,
			&nbsp;<a href="https://umio-yasuno.github.io/tags/gfx10">GFX10</a>,
			&nbsp;<a href="https://umio-yasuno.github.io/tags/gfx1011">gfx1011</a>,
		</nav>
		<nav class="foot-categories">
			<a href="https://umio-yasuno.github.io/categories">Categories</a>&nbsp;:
			&nbsp;<a href="https://umio-yasuno.github.io/categories/hardware"> Hardware</a>,
			&nbsp;<a href="https://umio-yasuno.github.io/categories/amd"> AMD</a>,
			&nbsp;<a href="https://umio-yasuno.github.io/categories/gpu"> GPU</a>,
		</nav>
	&nbsp;&nbsp;<span>Author : Umio Yasuno</span>&nbsp;&nbsp;/  <span>Lastmod : 2019-12-24 18:14:32 </span> 
		<div><a href="https://umio-yasuno.github.io/about/">About</a></div>
</footer>
<div class="title"><a href="https://umio-yasuno.github.io/">Coelacanth&#39;s Dream</a></div>

	</main>
		<link rel="stylesheet" href="https://umio-yasuno.github.io/css/anim.min.css">
		<div class="lace"></div> 
    </body>
</html>
